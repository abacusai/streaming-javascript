<!DOCTYPE html>
<html class="no-js" lang="">

<head>
    <title>Streaming API RE.AI - Sample</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <!-- Abacus.AI SDK -->
    <script async src="https://static.abacus.ai/sdk/js/streaming.v5.2.min.js"></script>
    <script>
    window.reDataList = window.reDataList || [];

    function reaitag() { window.reDataList.push(Array.prototype.slice.call(arguments)); }
    reaitag('init', {
        // Fill in with your streamingToken and streaming featureGroups
        streamingToken: '100bc05a1a834a5f9a53354c09798737',
        featureGroups: {
            record: '87bcbca40', // records interactions
            user: '11e42e1508', // stores user information
        },
        userKey: 'visitorId', // Abacus.AI will stream the userId to this key
        visitorId: 'your Unique USER ID', // comment this line out to let abacus.ai autogenerate a unique visitorId
        // deploymentId: 'deploymentId',
        // deploymentToken: 'deploymentToken',
    }, (user_id) => {console.log(`Initialized with userId ${user_id}`);}
);
    </script>
    <!-- User script -->
    <script>
    function updateUser() {
        alert('Updating User');
        reaitag('user', {
            userName: 'user1',
            zipcode: '78703'
        });
    }

    function addInteraction() {
        alert('Adding Interaction');
        reaitag('record', {
            itemId: ['item1'],
            eventType: 'click',
        });
    }

    function getPrediction() {
        alert('Getting Prediction');
        reaitag('predict', {options: {page: 1, numItems: 3}}, (result, error) => {
            if (result) {
                console.log(result);
            } else {
                console.log('Prediction Error');
                console.log(error);
            }
        });
    }
    </script>
</head>

<body style="margin: 0; padding: 0; height: 100%; overflow: hidden; color: white; background-color: black;" id="home" class="homeindex">
    <ul style="list-style: none;">
        <li><button onclick="updateUser()">Update User</button></li>
        <li><button onclick="addInteraction()">Add User Item Interaction</button></li>
        <li><button onclick="getPrediction()">Get Prediction</button></li>
    </ul>
</body>

</html>
